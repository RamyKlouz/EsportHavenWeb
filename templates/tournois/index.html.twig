{% extends 'header.oc.html.twig' %}

{% block title %}Tournois index{% endblock %}



{% block body %}
    <h1>Gestion des tournois<span>    <button class="btn btn-primary" id="myBtn">  Ajouter un nouveau tournoi</button></span></h1>

    <form action="#" class="nk-form nk-form-style-1" novalidate="novalidate">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Type something..." id="search">
            <button class="nk-btn nk-btn-color-main-1"><span class="ion-search"></span></button>
        </div>
    </form>

    <div class="table-responsive">
    <table class="table align-items-center ">
        <thead>
            <tr>

                <th>Nom du tournoi</th>
                <th>Nombre d'équipes</th>
                <th>Date de début</th>
                <th>Date de fin</th>
                <th>Jeux</th>
                <th>PARTIES</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody id="all">
        {% include 'tournois/ajax.html.twig' %}
        </tbody>
        <tbody id="search">
        </tbody>
    </table>
    </div>

    <!-- Trigger/Open The Modal -->


    <!-- The Modal -->
    <div id="myModal" class="modal">

        <div class="container" align="center">
            <!-- Modal content -->
            <div class="modal-content">
                <h3>Ajouter un Nouveau Tournoi &nbsp; <span class="close">&times;</span></h3>

                {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}
                {{ form_row(form.nom , { 'attr': {'class': 'form-control'} }) }}
                {{ form_row(form.nbEquipes , { 'attr': {'class': 'form-control'} }) }}
                {{ form_row(form.dateDeb , { 'attr': {'class': 'form-control'} }) }}
                {{ form_row(form.dateFin , { 'attr': {'class': 'form-control'} }) }}
                {{ form_row(form.jeux , { 'attr': {'class': 'form-control'} }) }}
                <br>
                {{ form_row(form.Confirmer , { 'attr': {'class': 'btn btn-success'} }) }}
                {{ form_end(form) }}
            </div>
        </div>



{#    </div>#}


<script>
    // Get the modal
    var modal = document.getElementById("myModal");

    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on the button, open the modal
    btn.onclick = function() {
        modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

</script>


        <script
                src="{{ asset('https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js')}}">
        </script>
        <script>
            $( document ).ready(function() {
                var currentRequest = null;
                $("#search").keyup(function(e){
                    /* La variable value va prendre la valeur insérer dans le champ de texte
                    afin d’effectuer la recherche */
                    var value = $(this).val();
                    if(currentRequest != null) {
                        currentRequest.abort();
                    }
                    /* Ajax est lancé lors du remplissage du champ texte dont l’id est
                    « search » pour faire la recherche */
                    currentRequest = $.ajax({
                        url : "{{ path('searchTournoisx') }}",
                        type : 'GET',
                        data: {
                            'searchValue' : value
                        },
                        success : function(retour)
                        {
                            $('#all').html(retour);
                        },
                    });
                    return false;
                });
            });
        </script>

{% endblock %}
{% block javascripts %}
    <script src="{{ asset('assets/js/jquery.js') }}"></script>
  <script src="{{ asset('theme/js/jquery.ajaxchimp.min.js') }}" ></script>
   {% endblock %}